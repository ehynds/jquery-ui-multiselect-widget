/*
 * jQuery MultiSelect UI Widget Tag Plugin 0.1
 * Copyright (c) 2011 John Roepke
 *
 * http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/
 *
 * Depends:
 *   - jQuery UI MultiSelect widget
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */
(function(a){a.widget("ech.multiselecttags",{_create:function(){var c=this,b=(this.instance=a(this.element).data("multiselect")),e=(this.labels=b.labels);var d=(this.selectedElements=a("<ul />")).addClass("ui-multiselect-tags ui-helper-reset ui-helper-clearfix").insertAfter(b.button);this.selectedElements.delegate("a","click.multiselect",function(j){j.preventDefault();var i=a(this),k=i.attr("value"),g=e.find("input"),h=g.filter(":checked"),f=b.element.find("option");f.each(function(){if(this.value===k){this.selected=false}});h.each(function(){if(this.value===k){this.checked=false}});i.parent().remove();setTimeout(a.proxy(b.update,b),10)});a(b.element[0]).bind("change",function(){c.updateTags()});c.updateTags()},updateTags:function(){var c=this.labels.find("input"),b=c.filter(":checked");this.selectedElements.html(b.map(function(){return'<li class="ui-corner-all ui-widget-content ui-state-default">'+this.title+'&nbsp;<a href="#" class="ui-corner-br ui-corner-tr ui-widget-header" value="'+this.value+'">x</a></li>'}).get().join(""))},widget:function(){return this.selectedElements},destroy:function(){a.Widget.prototype.destroy.call(this);this.selectedElements.remove()}})})(jQuery);
